{
  "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2016-11-28/dtlArtifacts.json",
  "title": "VS CodeSpaces",
  "publisher": "DanielMeixner",
  "description": "Registers a headless, self-hosted environment available via VS CodeSpaces.",
  "tags": [
    "DevBox"
  ],
  "targetOsType": "Windows",
  "parameters": {
    "mail": {
      "type": "string",
      "displayName": "mail",
      "defaultValue": "daniel.meixner@microsoft.com",
      "description": "Email address where code is sent to."
    },
    "subscriptionid": {
      "type": "string",
      "displayName": "subscriptionid",
      "description": "Subscription ID which holds the VSO Plan.",
      "defaultValue": ""
    },
    "resourcegroup": {
      "type": "string",
      "displayName": "resourcegroup",
      "description": "Resource Group of VSO plan",
      "defaultValue": "vso-rg-1d9890a"
    },
    "planname": {
      "type": "string",
      "displayName": "planname",
      "description": "Name of VSO Plan.",
      "defaultValue": "vso-plan-westeurope-2"
    },
    "user": {
      "type": "string",
      "displayName": "user",
      "description": "Username. User be available on machine. A service will be registerd running with this account.",
      "defaultValue": "daniel"
    },
    "password": {
      "type": "securestring",
      "displayName": "password",
      "description": "PW on machine"
    }
  },
  "runCommand": {
    "commandToExecute": "[concat('powershell.exe -ExecutionPolicy bypass ./install.ps1 ' , ' -mail ', parameters('mail'), ' -resourcegroup ' ,  parameters('resourcegroup'), ' -subscriptionid ', parameters('subscriptionid'), ' -user ', parameters('user'), ' -password (ConvertTo-SecureString ''', parameters('password'), ''' -AsPlainText -Force) '     , ' -planname ', parameters('planname') ) ]"
  }
}